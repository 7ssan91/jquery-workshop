<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="keywords" content="jQuery,JavaScript">
  <meta name="description" content="jQueryの小技/ちょっとした便利コードをどしどし紹介するブログです。ネイティブJavaScriptしか知らない人向けにjQueryの魅力を知ってもらえたら。">
  <meta name="author" content="ryoichi-obara">
  <title>jQueryで親/子/孫セレクトボックス (hierselect) | jQuery workshop</title>

  <!-- <link rel="icon" href="./favicon.ico"> -->
  <!-- Bootstrap core CSS -->
  <link href="./css/bootstrap.min.css" rel="stylesheet">
  <!-- Bootstrap theme -->
  <link href="./css/bootstrap-theme.min.css" rel="stylesheet">
  <!-- Custom styles for this template -->
  <link href="./css/jq-workshop.css" rel="stylesheet">

  <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
  <!--[if lt IE 9]>
  <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
  <![endif]-->

  <style type="text/css">

  </style>
</head>
<body>
<header>
  <!-- Fixed navbar -->
  <nav class="navbar navbar-inverse navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
          <span class="sr-only">jQuery workshop</span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="#">jQuery workshop</a>
      </div>
      <div id="navbar" class="navbar-collapse collapse">
        <ul class="nav navbar-nav">
          <li class="active"><a href="#">Home</a></li>
          <li><a href="http://jquery-workshop.hatenablog.com/">Blog</a></li>
          <li><a href="http://profile.hatena.ne.jp/ryoichi0102/">Profile</a></li>
          <li class="dropdown">
            <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Acitons <span class="caret"></span></a>
            <ul class="dropdown-menu">
              <li><a href="http://profile.hatena.ne.jp/ryoichi0102/follow.add">Add favorite on hatena</a></li>
              <li><a href="https://www.hatena.ne.jp/shop/point/sendpoint?to_hatena_id=ryoichi0102">Send hatena point</a></li>
              <li role="separator" class="divider"></li>
              <li class="dropdown-header">Check other blogs.</li>
              <li><a href="http://ryoichi0102.hatenablog.com/">Main blog</a></li>
              <li><a href="http://try-java.hatenablog.com/">For Java engineers</a></li>
            </ul>
          </li>
        </ul>
      </div>
    </div>
  </nav>
</header>
<main>
<div id="main" class="container">

  <form class="form-horizontal">

    <div class="row">
      <div class="col-xs-1">
        <label for="pref" class="control-label">都道府県</label>
      </div>
      <div class="col-xs-3">
        <select id="pref" multiple class="form-control">
        </select>
      </div>
      <label for="pref" class="col-xs-1 control-label">市区町村</label>
      <div class="col-xs-3">
        <select id="ward" class="pref-children form-control" multiple>
        </select>
      </div>
      <label for="pref" class="col-xs-1 control-label">町名</label>
      <div class="col-xs-3">
        <select id="town" class="pref-children ward-children form-control" multiple>
        </select>
      </div>
    </div>

  </form>

</div>
</main>
<footer>

</footer>
<!-- Placed at the end of the document so the pages load faster -->
<script src="./js/jquery-1.12.4.min.js"></script>
<script src="./js/bootstrap.min.js"></script>
<script src="./js/jquery.narrows.min.js"></script>
<!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
<!-- <script src="https://maxcdn.bootstrapcdn.com/js/ie10-viewport-bug-workaround.js"></script> -->
<script type="text/javascript">
<!--

  $(document).ready(function($) {
    
    
    // 親・子・孫データのサンプル。
    var jsonData = [{
      "東京都":{
        "千代田区":["飯田橋","一番町","岩本町","内神田","内幸町","大手町","鍛冶町","霞が関","神田相生町","神田淡路町","神田和泉町","神田岩本町","神田小川町","神田鍛冶町","神田北乗物町","神田紺屋町","神田佐久間河岸","神田佐久間町","神田神保町","神田須田町","神田駿河台","神田多町","神田司町","神田富山町","神田錦町","神田西福田町","神田練塀町","神田花岡町","神田東紺屋町","神田東松下町","神田平河町","神田松永町","神田美倉町","神田美土代町","紀尾井町","北の丸公園","九段南","九段北","皇居外苑","麹町","五番町","猿楽町","三番町","外神田","千代田","永田町","西神田","二番町","隼町","東神田","一ツ橋(1丁目)","一ツ橋(2丁目)","日比谷公園","平河町","富士見","丸の内","三崎町","有楽町","四番町","六番町"],
        "中央区":["明石町","入船","勝どき","京橋","銀座","新川","新富","月島","築地","佃","豊海町","日本橋","日本橋大伝馬町","日本橋蛎殻町","日本橋兜町","日本橋茅場町","日本橋小網町","日本橋小伝馬町","日本橋小舟町","日本橋富沢町","日本橋中洲","日本橋人形町","日本橋箱崎町","日本橋浜町","日本橋馬喰町","日本橋久松町","日本橋堀留町","日本橋本石町","日本橋本町","日本橋室町","日本橋横山町","八丁堀","浜離宮庭園","晴海","東日本橋","湊","八重洲(1丁目)","八重洲(2丁目)"],
        "港区":["赤坂","麻布十番","麻布台","麻布永坂町","麻布狸穴町","愛宕","海岸(1、2丁目)","海岸(3丁目)","北青山","港南","芝(1～3丁目)","芝(4、5丁目)","芝浦(1丁目)","芝浦(2～4丁目)","芝公園","芝大門","白金","白金台","新橋","台場","高輪","虎ノ門","西麻布","西新橋","浜松町","東麻布","東新橋","三田","南青山","南麻布","元赤坂","元麻布","六本木"],
        "新宿区":["愛住町","赤城下町","赤城元町","揚場町","荒木町","市谷加賀町","市谷甲良町","市谷砂土原町","市谷左内町","市谷鷹匠町","市谷田町","市谷台町","市谷長延寺町","市谷仲之町","市谷八幡町","市谷船河原町","市谷本村町","市谷薬王寺町","市谷柳町","市谷山伏町","岩戸町","榎町","大久保","改代町","神楽河岸","神楽坂","霞ケ丘町","片町","歌舞伎町","上落合","河田町","喜久井町","北新宿","北町","北山伏町","細工町","左門町","三栄町","信濃町","下落合","下宮比町","白銀町","新小川町","新宿","水道町","須賀町","住吉町","大京町","高田馬場","箪笥町","築地町","津久戸町","筑土八幡町","天神町","戸塚町","富久町","戸山(3丁目18・21番)","戸山(その他)","内藤町","中井","中落合","中里町","中町","納戸町","西落合","西五軒町","西新宿","二十騎町","西早稲田(2丁目1番1～23号、2番)","西早稲田(その他)","馬場下町","払方町","原町","東榎町","東五軒町","百人町","袋町","舟町","弁天町","本塩町","南榎町","南町","南元町","南山伏町","山吹町","矢来町","横寺町","余丁町","四谷","四谷坂町","若葉","若松町","若宮町","早稲田鶴巻町","早稲田南町","早稲田町"],
        "文京区":["大塚","音羽","春日","小石川","後楽","小日向","水道","関口","千石","千駄木","西片","根津","白山(1丁目)","白山(2～5丁目)","本駒込","本郷","向丘","目白台","弥生","湯島"],
        "台東区":["秋葉原","浅草","浅草橋","池之端","今戸","入谷","上野","上野公園","上野桜木","雷門","北上野","清川","蔵前","小島","寿","駒形","下谷","千束","台東","鳥越","西浅草","日本堤","根岸","橋場","花川戸","東浅草","東上野","松が谷","三筋","三ノ輪","元浅草","谷中","柳橋","竜泉"],
        "墨田区":["吾妻橋","石原","押上","亀沢","菊川","京島","錦糸","江東橋","墨田","太平","立花","立川","千歳","堤通","業平","東駒形","東墨田","東向島","文花","本所","緑","向島","八広","横網","横川","両国"],
        "江東区":["青海","有明","石島","海辺","永代","枝川","越中島","扇橋","大島","亀戸","北砂","木場","清澄","佐賀","猿江","塩浜","潮見","東雲","白河","新大橋","新木場","新砂","住吉","千石","千田","高橋","辰巳","中央防波堤","東陽","常盤","富岡","豊洲","東砂","平野","深川","福住","冬木","古石場","牡丹","南砂","三好","毛利","森下","門前仲町","夢の島","若洲"],
        "品川区":["荏原","大井","大崎","勝島","上大崎","北品川(1～4丁目)","北品川(5、6丁目)","小山","小山台","戸越","中延","西大井","西五反田","西品川","西中延","旗の台","東大井","東五反田","東品川","東中延","東八潮","平塚","広町","二葉","南大井","南品川","八潮","豊町"],
        "目黒区":["青葉台","大岡山","大橋","柿の木坂","上目黒","五本木","駒場","下目黒","自由が丘","洗足","平町","鷹番","中央町","中町","中根","中目黒","原町","東が丘","東山","碑文谷","三田","緑が丘","南","目黒","目黒本町","八雲","祐天寺"],
        "大田区":["池上","石川町","鵜の木","大森中","大森本町","大森東","大森西","大森南","大森北","蒲田","蒲田本町","上池台","北糀谷","北千束","北馬込","北嶺町","久が原","京浜島","山王","下丸子","城南島","昭和島","新蒲田","多摩川","千鳥","中央","田園調布","田園調布本町","田園調布南","東海","仲池上","中馬込","仲六郷","西蒲田","西糀谷","西馬込","西嶺町","西六郷","萩中","羽田","羽田旭町","羽田空港","東蒲田","東糀谷","東馬込","東嶺町","東矢口","東雪谷","東六郷","ふるさとの浜辺公園","平和島","平和の森公園","本羽田","南蒲田","南久が原","南千束","南馬込","南雪谷","南六郷","矢口","雪谷大塚町"],
        "世田谷区":["赤堤","池尻","宇奈根","梅丘","大蔵","大原","岡本","奥沢","尾山台","粕谷","鎌田","上馬","上北沢","上祖師谷","上野毛","上用賀","北烏山","北沢","喜多見","砧","砧公園","給田","経堂","豪徳寺","駒沢","駒沢公園","桜","桜丘","桜新町","桜上水","三軒茶屋","下馬","新町","成城","瀬田","世田谷","祖師谷","太子堂","代沢","代田","玉川","玉川台","玉川田園調布","玉堤","千歳台","弦巻","等々力","中町","野毛","野沢","八幡山","羽根木","東玉川","深沢","船橋","松原","三宿","南烏山","宮坂","用賀","若林"],
        "渋谷区":["上原","鶯谷町","宇田川町","恵比寿","恵比寿 西","恵比寿 南","大山町","神山町","桜丘町","笹塚","猿楽町","渋谷","松濤","神宮前","神泉町","神南","千駄ヶ谷","代官山町","道玄坂","富ヶ谷","南平台町","西原","幡ヶ谷","鉢山町","初台","東","広尾","本町","円山町","元代々木町","代々木","代々木神園町"],
        "中野区":["新井","江古田","江原町","上鷺宮","上高田","鷺宮","白鷺","中央","中野","沼袋","野方","東中野","本町","松が丘","丸山","南台","大和町","弥生町","若宮"],
        "杉並区":["阿佐谷南","阿佐谷北","天沼","井草","和泉","今川","梅里","永福","大宮","荻窪","上井草","上荻","上高井戸","久我山","高円寺南","高円寺北","清水","下井草","下高井戸","松庵","善福寺","高井戸東","高井戸西","成田東","成田西","西荻南","西荻北","浜田山","方南","堀ノ内","本天沼","松ノ木","南荻窪","宮前","桃井","和田"],
        "豊島区":["池袋(1丁目)","池袋(2～4丁目)","池袋本町","要町","上池袋","北大塚","駒込","巣鴨","千川","雑司が谷","高田","高松","千早","長崎","西池袋","西巣鴨","東池袋","南池袋","南大塚","南長崎","目白"],
        "北区":["赤羽","赤羽台","赤羽西","赤羽南","赤羽北","岩淵町","浮間","王子","王子本町","上十条","上中里","神谷","岸町","桐ケ丘","栄町","志茂","十条台","十条仲原","昭和町","滝野川","田端","田端新町","豊島","中里","中十条","西が丘","西ケ原","東十条","東田端","堀船"],
        "荒川区":["荒川","西尾久","西日暮里","東尾久","東日暮里","町屋","南千住"],
        "板橋区":["相生町","赤塚","赤塚新町","小豆沢","泉町","板橋","稲荷台","大原町","大谷口","大谷口上町","大谷口北町","大山金井町","大山東町","大山西町","大山町","加賀","上板橋","熊野町","小茂根","幸町","栄町","坂下","桜川","清水町","志村","新河岸","大門","高島平","東新町","常盤台","徳丸","中板橋","仲宿","中台","仲町","中丸町","成増","西台(1丁目)","西台(2～4丁目)","蓮沼町","蓮根","氷川町","東坂下","東山町","富士見町","双葉町","舟渡","本町","前野町","三園","南町","南常盤台","宮本町","向原","大和町","弥生町","四葉","若木"],
        "練馬区":["旭丘","旭町","大泉学園町","大泉町","春日町","上石神井","上石神井南町","北町","向山","小竹町","栄町","桜台","下石神井","石神井台","石神井町","関町東","関町南","関町北","高野台","高松","田柄","立野町","土支田","豊玉上","豊玉中","豊玉南","豊玉北","中村","中村南","中村北","西大泉","西大泉町","錦","貫井","練馬","羽沢","早宮","光が丘","氷川台","東大泉","富士見台","平和台","南大泉","南田中","三原台","谷原"],
        "足立区":["青井(1～3丁目)","青井(4～6丁目)","足立","綾瀬","伊興","伊興本町","入谷","入谷町","梅島","梅田","扇","大谷田","興野","小台","加賀","加平","北加平町","栗原","弘道","江北","古千谷","古千谷本町","佐野","皿沼","鹿浜","島根","新田","神明","神明南","関原","千住","千住曙町","千住旭町","千住東","千住大川町","千住河原町","千住寿町","千住桜木","千住関屋町","千住龍田町","千住中居町","千住仲町","千住橋戸町","千住緑町","千住宮元町","千住元町","千住柳町","竹の塚","辰沼","中央本町(1、2丁目)","中央本町(3～5丁目)","椿","東和","舎人","舎人公園","舎人町","中川","西綾瀬","西新井","西新井栄町","西新井本町","西伊興","西伊興町","西加平","西竹の塚","西保木間","花畑","東綾瀬","東伊興","東保木間","東六月町","一ツ家","日ノ出町","平野","保木間","保塚町","堀之内","南花畑","宮城","六木","本木","本木東町","本木西町","本木南町","本木北町","谷在家","谷中","柳原","六月","六町"],
        "葛飾区":["青戸","奥戸","お花茶屋","金町","金町浄水場","鎌倉","亀有","小菅","柴又","白鳥","新小岩","高砂","宝町","立石","新宿","西亀有(1、2丁目)","西亀有(3、4丁目)","西新小岩","西水元","東金町","東新小岩","東立石","東堀切","東水元","東四つ木","細田","堀切","水元","水元公園","南水元","四つ木"],
        "江戸川区":["一之江","一之江町","宇喜田町","江戸川(1～3丁目、4丁目1～14番)","江戸川(その他)","大杉","興宮町","上一色","上篠崎","北葛西","北小岩","北篠崎","小松川","鹿骨","鹿骨町","篠崎町","下篠崎町","清新町","中央","中葛西","新堀","西一之江","西葛西","西小岩","西小松川町","西篠崎","西瑞江(3丁目、4丁目3～9番)","西瑞江(4丁目1～2番・10～27番、5丁目)","二之江町","春江町(1～3丁目)","春江町(4、5丁目)","東葛西","東小岩","東小松川","東篠崎","東篠崎町","東松本","東瑞江","平井","船堀","本一色","松江","松島","松本","瑞江","南葛西","南小岩","南篠崎町","谷河内(1丁目)","谷河内(2丁目)","臨海町"]
      },
      "神奈川県":{
        "町田市":[]
      }
    }];


    var placeSelectOptions = (function($this, $child, $grandChildren, jsonval) {
      $child.empty();
      if ($grandChildren != null && $grandChildren != undefined) {
        $grandChildren.empty();
      }

      $.each(jsonval, function (key, val) {

        if (key == $this.val()) {
          $child.append('<option>');
          $.each(val, function (key, val) {
            if (typeof key == 'string' && typeof val == 'object') {
              $child.append($('<option>').append(key));
            //} else if (typeof key == 'number' && typeof val == 'string') {
            } else {
              $child.append($('<option>').append(val));
            }
          });
        }
      });
    });

    $('#pref').on('change', function() {
      placeSelectOptions($(this), $('#ward'), $('#town'), jsonData[0]);
    });

    $('#ward').on('change', function() {
      placeSelectOptions($(this), $('#town'), null, jsonData[0][$('#pref').val()]);
    });

    // 初期化.
    placeSelectOptions($('<input value="0">'), $('#pref'), null, jsonData);
  });

// -->
</script>
</body>
</html>
